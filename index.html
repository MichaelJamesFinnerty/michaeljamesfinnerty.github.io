<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
    <link rel="stylesheet" href="css/fnpress.css">
    <link rel="stylesheet" href="css/page_structure.css">
    <script src="posts/index.json"></script>
    <script src="structs/header.json"></script>
    <script src="structs/footer.json"></script>
    <script src="fnpressjs/fnpress.js"></script>
    <title>Document</title>
</head>

<body>
    <div id="headway">
    </div>
    
    <div id="main">
    </div>            
    
    <div id="footer">
    </div>
    
    <script>
        
        window.addEventListener("DOMContentLoaded", load_handler);
        
        function load_handler() {
            document.getElementById("next_button").addEventListener("click", click_handler, false);            
        }
        
        function click_handler(event) {
          //  clear the main window
          var m = document.getElementById("main");
          while (m.firstChild) {
            m.removeChild(m.firstChild);
          }
            
          console.log(event.target)
          var script = document.createElement('script');
          script.src = "posts/pymkdir.json";
            
          script.onload = function () {
            fnpress(JSON.parse(pymkdir_data), "main");
          };
            
          document.head.appendChild(script);
        }
        
      /*
      var hjson = JSON.parse(header_data);
      var z = Object.keys(hjson[0]);
        
      for (f in z) {
          if (f==="0") {
            fnpress(JSON.parse('{' + JSON.stringify(z[f]) + ':""}'), "headway");
          } else {
            fnpress(JSON.parse('{' + JSON.stringify(z[f]) + ':""}'));
          }
      }
      */
        
      fnpress(JSON.parse(header_data), "headway");
      fnpress(JSON.parse(index_data), "main");
      fnpress(JSON.parse(footer_data), "footer");
    </script>
   
</body>

</html>